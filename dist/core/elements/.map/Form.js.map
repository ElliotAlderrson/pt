{"version":3,"sources":["Form.coffee"],"names":[],"mappings":"AACA,IAAA;;AAAM;EAKS,cAAE,KAAF;IAGX,IAAC,CAAA,KAAD,GAAS;IAGT,IAAC,CAAA,EAAD,GAAM,KAAK,CAAC;IAGZ,IAAC,CAAA,EAAE,CAAC,SAAJ,GAAgB;IAChB,IAAC,CAAA,EAAE,CAAC,WAAJ,GAAkB;IAClB,IAAC,CAAA,EAAE,CAAC,SAAJ,GAAgB;IAChB,IAAC,CAAA,EAAE,CAAC,IAAJ,GAAW;IAGX,IAAC,CAAA,MAAD,GAAU;IAGV,IAAC,CAAA,OAAD,GAAW;IAGX,IAAC,CAAA,QAAD,GAAY;IAGZ,IAAC,CAAA,QAAD,GAAY;EAxBD;;EA+Bb,IAAC,CAAA,OAAD,GAAW,SAAE,SAAF;AAET,QAAA;IAAA,IAAA,GAAO,QAAQ,CAAC,cAAT,CAAyB,SAAzB;IACP,EAAA,GAAQ,IAAA,IAAS,IAAI,CAAC,UAAjB,GAAiC,IAAI,CAAC,UAAL,CAAgB,IAAhB,CAAjC,GAA4D;IACjE,IAAG,CAAC,EAAJ;AAAY,YAAM,oCAAlB;;WACA;EALS;;EAWX,IAAC,CAAA,IAAD,GAAO,SAAC,GAAD,EAAM,IAAN;IACL,IAAG,CAAC,IAAI,CAAC,EAAT;AAAiB,YAAQ,CAAC,IAAI,CAAC,QAAL,CAAA,CAAD,CAAA,GAAiB,iBAA1C;;IACA,GAAG,CAAC,SAAJ,CAAA;IACA,GAAG,CAAC,MAAJ,CAAY,IAAI,CAAC,CAAjB,EAAoB,IAAI,CAAC,CAAzB;IACA,GAAG,CAAC,MAAJ,CAAY,IAAI,CAAC,EAAE,CAAC,CAApB,EAAuB,IAAI,CAAC,EAAE,CAAC,CAA/B;WACA,GAAG,CAAC,MAAJ,CAAA;EALK;;EAYP,IAAC,CAAA,KAAD,GAAQ,SAAC,GAAD,EAAM,KAAN;AACN,QAAA;AAAA;SAAA,uCAAA;;mBACE,IAAI,CAAC,IAAL,CAAW,GAAX,EAAgB,EAAhB;AADF;;EADM;;EAUR,IAAC,CAAA,IAAD,GAAO,SAAC,GAAD,EAAM,IAAN,EAAY,IAAZ,EAAuB,MAAvB;;MAAY,OAAK;;;MAAM,SAAO;;IACnC,IAAG,CAAC,IAAI,CAAC,EAAT;AAAiB,YAAM,EAAA,GAAE,CAAC,IAAI,CAAC,QAAL,CAAA,CAAA,KAAmB,CAAI,CAAA,CAAE,IAAF,CAAxB,EAAzB;;IACA,GAAG,CAAC,SAAJ,CAAA;IACA,GAAG,CAAC,MAAJ,CAAY,IAAI,CAAC,CAAjB,EAAoB,IAAI,CAAC,CAAzB;IACA,GAAG,CAAC,MAAJ,CAAY,IAAI,CAAC,CAAjB,EAAoB,IAAI,CAAC,EAAE,CAAC,CAA5B;IACA,GAAG,CAAC,MAAJ,CAAY,IAAI,CAAC,EAAE,CAAC,CAApB,EAAuB,IAAI,CAAC,EAAE,CAAC,CAA/B;IACA,GAAG,CAAC,MAAJ,CAAY,IAAI,CAAC,EAAE,CAAC,CAApB,EAAuB,IAAI,CAAC,CAA5B;IACA,GAAG,CAAC,SAAJ,CAAA;IACA,IAAG,MAAH;MAAe,GAAG,CAAC,MAAJ,CAAA,EAAf;;IACA,IAAG,IAAH;aAAa,GAAG,CAAC,IAAJ,CAAA,EAAb;;EATK;;EAiBP,IAAC,CAAA,MAAD,GAAS,SAAC,GAAD,EAAM,CAAN,EAAS,IAAT,EAAoB,MAApB;;MAAS,OAAK;;;MAAM,SAAO;;IAClC,GAAG,CAAC,SAAJ,CAAA;IACA,GAAG,CAAC,GAAJ,CAAS,CAAC,CAAC,CAAX,EAAc,CAAC,CAAC,CAAhB,EAAmB,CAAC,CAAC,MAArB,EAA6B,CAA7B,EAAgC,KAAK,CAAC,MAAtC,EAA8C,KAA9C;IACA,IAAG,IAAH;MAAa,GAAG,CAAC,IAAJ,CAAA,EAAb;;IACA,IAAG,MAAH;MAAe,GAAG,CAAC,MAAJ,CAAA,EAAf;;EAJO;;EAcT,IAAC,CAAA,GAAD,GAAM,SAAC,GAAD,EAAM,EAAN,EAAU,MAAV,EAAkB,KAAlB,EAAyB,GAAzB;IACJ,GAAG,CAAC,SAAJ,CAAA;IACA,GAAG,CAAC,GAAJ,CAAS,EAAE,CAAC,CAAZ,EAAe,EAAE,CAAC,CAAlB,EAAqB,MAArB,EAA6B,KAA7B,EAAoC,GAApC;WACA,GAAG,CAAC,MAAJ,CAAA;EAHI;;EAWN,IAAC,CAAA,QAAD,GAAW,SAAE,GAAF,EAAO,GAAP,EAAY,IAAZ,EAAuB,MAAvB;;MAAY,OAAK;;;MAAM,SAAO;;IACvC,GAAG,CAAC,SAAJ,CAAA;IACA,GAAG,CAAC,MAAJ,CAAY,GAAG,CAAC,CAAhB,EAAmB,GAAG,CAAC,CAAvB;IACA,GAAG,CAAC,MAAJ,CAAY,GAAG,CAAC,EAAE,CAAC,CAAnB,EAAsB,GAAG,CAAC,EAAE,CAAC,CAA7B;IACA,GAAG,CAAC,MAAJ,CAAY,GAAG,CAAC,EAAE,CAAC,CAAnB,EAAsB,GAAG,CAAC,EAAE,CAAC,CAA7B;IACA,GAAG,CAAC,SAAJ,CAAA;IACA,IAAG,IAAH;MAAa,GAAG,CAAC,IAAJ,CAAA,EAAb;;IACA,IAAG,MAAH;MAAe,GAAG,CAAC,MAAJ,CAAA,EAAf;;EAPS;;EAkBX,IAAC,CAAA,KAAD,GAAQ,SAAC,GAAD,EAAM,EAAN,EAAU,QAAV,EAAsB,IAAtB,EAAiC,MAAjC,EAA+C,MAA/C;AAEN,QAAA;;MAFgB,WAAS;;;MAAG,OAAK;;;MAAM,SAAO;;;MAAO,SAAO;;IAE5D,IAAG,MAAH;MACE,GAAG,CAAC,SAAJ,CAAA;MACA,GAAG,CAAC,GAAJ,CAAS,EAAE,CAAC,CAAZ,EAAe,EAAE,CAAC,CAAlB,EAAqB,QAArB,EAA+B,CAA/B,EAAkC,KAAK,CAAC,MAAxC,EAAgD,KAAhD,EAFF;KAAA,MAAA;MAKE,EAAA,GAAK,EAAE,CAAC,CAAH,GAAK;MACV,EAAA,GAAK,EAAE,CAAC,CAAH,GAAK;MACV,EAAA,GAAK,EAAE,CAAC,CAAH,GAAK;MACV,EAAA,GAAK,EAAE,CAAC,CAAH,GAAK;MAEV,GAAG,CAAC,SAAJ,CAAA;MACA,GAAG,CAAC,MAAJ,CAAY,EAAZ,EAAgB,EAAhB;MACA,GAAG,CAAC,MAAJ,CAAY,EAAZ,EAAgB,EAAhB;MACA,GAAG,CAAC,MAAJ,CAAY,EAAZ,EAAgB,EAAhB;MACA,GAAG,CAAC,MAAJ,CAAY,EAAZ,EAAgB,EAAhB;MACA,GAAG,CAAC,SAAJ,CAAA,EAfF;;IAiBA,IAAG,IAAH;MAAa,GAAG,CAAC,IAAJ,CAAA,EAAb;;IACA,IAAG,MAAH;MAAe,GAAG,CAAC,MAAJ,CAAA,EAAf;;AACA,WAAO;EArBD;;EA4BR,IAAC,CAAA,MAAD,GAAS,SAAC,GAAD,EAAM,GAAN,EAAW,QAAX,EAAuB,IAAvB,EAAkC,MAAlC,EAAgD,MAAhD;AACP,QAAA;;MADkB,WAAS;;;MAAG,OAAK;;;MAAM,SAAO;;;MAAO,SAAO;;AAC9D;SAAA,qCAAA;;mBACE,IAAI,CAAC,KAAL,CAAY,GAAZ,EAAiB,CAAjB,EAAoB,QAApB,EAA8B,IAA9B,EAAoC,MAApC,EAA4C,MAA5C;AADF;;EADO;;EAWT,IAAC,CAAA,OAAD,GAAU,SAAE,GAAF,EAAO,GAAP,EAAY,SAAZ,EAA4B,IAA5B,EAAuC,MAAvC;AACR,QAAA;;MADoB,YAAU;;;MAAM,OAAK;;;MAAM,SAAO;;IACtD,IAAG,GAAG,CAAC,MAAJ,IAAc,CAAjB;AAAwB,aAAxB;;IACA,GAAG,CAAC,SAAJ,CAAA;IACA,GAAG,CAAC,MAAJ,CAAY,GAAI,CAAA,CAAA,CAAE,CAAC,CAAnB,EAAsB,GAAI,CAAA,CAAA,CAAE,CAAC,CAA7B;AACA,SAAS,gDAAT;MACE,GAAG,CAAC,MAAJ,CAAY,GAAI,CAAA,CAAA,CAAE,CAAC,CAAnB,EAAsB,GAAI,CAAA,CAAA,CAAE,CAAC,CAA7B;AADF;IAGA,IAAG,SAAH;MAAkB,GAAG,CAAC,SAAJ,CAAA,EAAlB;;IACA,IAAG,IAAH;MAAa,GAAG,CAAC,IAAJ,CAAA,EAAb;;IACA,IAAG,MAAH;MAAe,GAAG,CAAC,MAAJ,CAAA,EAAf;;EATQ;;EAeV,IAAC,CAAA,KAAD,GAAQ,SAAE,GAAF,EAAO,GAAP;WACN,IAAI,CAAC,OAAL,CAAc,GAAd,EAAmB,GAAnB,EAAwB,KAAxB,EAA+B,KAA/B,EAAsC,IAAtC;EADM;;EASR,IAAC,CAAA,IAAD,GAAO,SAAE,GAAF,EAAO,EAAP,EAAW,GAAX,EAAgB,QAAhB;WACL,GAAG,CAAC,QAAJ,CAAc,GAAd,EAAmB,EAAE,CAAC,CAAtB,EAAyB,EAAE,CAAC,CAA5B,EAA+B,QAA/B;EADK;;iBAUP,IAAA,GAAM,SAAC,CAAD;IACJ,IAAC,CAAA,EAAE,CAAC,SAAJ,GAAmB,CAAH,GAAU,CAAV,GAAiB;IACjC,IAAC,CAAA,MAAD,GAAW,CAAC,CAAC;AACb,WAAO;EAHH;;iBAYN,MAAA,GAAQ,SAAC,CAAD,EAAI,KAAJ,EAAW,KAAX;IACN,IAAC,CAAA,EAAE,CAAC,WAAJ,GAAqB,CAAH,GAAU,CAAV,GAAiB;IACnC,IAAC,CAAA,OAAD,GAAW,CAAC,CAAC;IACb,IAAG,KAAH;MAAc,IAAC,CAAA,EAAE,CAAC,SAAJ,GAAgB,MAA9B;;IACA,IAAG,KAAH;MAAc,IAAC,CAAA,EAAE,CAAC,QAAJ,GAAe,MAA7B;;AACA,WAAO;EALD;;iBAcR,IAAA,GAAM,SAAC,IAAD,EAAO,IAAP;;MAAO,OAAK,IAAC,CAAA;;IACjB,IAAC,CAAA,QAAD,GAAY;IACZ,IAAC,CAAA,EAAE,CAAC,IAAJ,GAAc,IAAD,GAAM,KAAN,GAAW;AACxB,WAAO;EAHH;;iBAQN,IAAA,GAAM,SAAE,KAAF;WACJ,IAAC,CAAA,MAAD,CAAS,KAAT;EADI;;iBAON,MAAA,GAAQ,SAAE,KAAF;IACN,KAAK,CAAC,KAAN,CAAA;IAEA,IAAG,KAAA,YAAiB,MAApB;MACE,IAAI,CAAC,MAAL,CAAY,IAAC,CAAA,EAAb,EAAiB,KAAjB,EAAwB,IAAC,CAAA,MAAzB,EAAiC,IAAC,CAAA,OAAlC,EADF;KAAA,MAGK,IAAG,KAAA,YAAiB,SAApB;MACH,IAAI,CAAC,IAAL,CAAW,IAAC,CAAA,EAAZ,EAAgB,KAAhB,EAAuB,IAAC,CAAA,MAAxB,EAAgC,IAAC,CAAA,OAAjC,EADG;KAAA,MAGA,IAAG,KAAA,YAAiB,QAApB;MACH,IAAI,CAAC,QAAL,CAAe,IAAC,CAAA,EAAhB,EAAoB,KAApB,EAA2B,IAAC,CAAA,MAA5B,EAAoC,IAAC,CAAA,OAArC,EADG;KAAA,MAGA,IAAG,KAAA,YAAiB,IAAjB,IAAyB,KAAA,YAAiB,IAA7C;MACH,IAAI,CAAC,IAAL,CAAU,IAAC,CAAA,EAAX,EAAe,KAAf,EADG;KAAA,MAGA,IAAG,KAAA,YAAiB,QAApB;MACH,IAAI,CAAC,OAAL,CAAa,IAAC,CAAA,EAAd,EAAkB,KAAK,CAAC,MAAxB,EADG;KAAA,MAGA,IAAG,KAAA,YAAiB,MAAjB,IAA2B,KAAA,YAAiB,KAA/C;MACH,IAAI,CAAC,KAAL,CAAW,IAAC,CAAA,EAAZ,EAAgB,KAAhB,EADG;;AAIL,WAAO;EAtBD;;iBA8BR,KAAA,GAAO,SAAC,CAAD,EAAI,QAAJ,EAAgB,QAAhB;;MAAI,WAAS;;;MAAG,WAAS;;IAC9B,IAAI,CAAC,KAAL,CAAW,IAAC,CAAA,EAAZ,EAAgB,CAAhB,EAAmB,QAAnB,EAA6B,IAAC,CAAA,MAA9B,EAAsC,IAAC,CAAA,OAAvC,EAAgD,QAAhD;AACA,WAAO;EAFF;;iBAUP,MAAA,GAAQ,SAAC,EAAD,EAAK,QAAL,EAAiB,QAAjB;;MAAK,WAAS;;;MAAG,WAAS;;IAChC,IAAI,CAAC,MAAL,CAAY,IAAC,CAAA,EAAb,EAAiB,EAAjB,EAAqB,QAArB,EAA+B,IAAC,CAAA,MAAhC,EAAwC,IAAC,CAAA,OAAzC,EAAkD,QAAlD;AACA,WAAO;EAFD;;iBAQR,IAAA,GAAM,SAAC,CAAD;IACJ,IAAI,CAAC,IAAL,CAAU,IAAC,CAAA,EAAX,EAAe,CAAf;AACA,WAAO;EAFH;;iBAON,KAAA,GAAO,SAAC,EAAD;IACL,IAAI,CAAC,KAAL,CAAW,IAAC,CAAA,EAAZ,EAAgB,EAAhB;AACA,WAAO;EAFF;;iBAQP,IAAA,GAAM,SAAC,CAAD;IACJ,IAAI,CAAC,IAAL,CAAW,IAAC,CAAA,EAAZ,EAAgB,CAAhB,EAAmB,IAAC,CAAA,MAApB,EAA4B,IAAC,CAAA,OAA7B;AACA,WAAO;EAFH;;iBAQN,MAAA,GAAQ,SAAC,CAAD;IACN,IAAI,CAAC,MAAL,CAAa,IAAC,CAAA,EAAd,EAAkB,CAAlB,EAAqB,IAAC,CAAA,MAAtB,EAA8B,IAAC,CAAA,OAA/B;AACA,WAAO;EAFD;;iBASR,GAAA,GAAK,SAAC,CAAD,EAAI,KAAJ,EAAW,GAAX;IACH,IAAI,CAAC,GAAL,CAAU,IAAC,CAAA,EAAX,EAAe,CAAf,EAAkB,CAAC,CAAC,MAApB,EAA4B,KAA5B,EAAmC,GAAnC;AACA,WAAO;EAFJ;;iBAOL,QAAA,GAAU,SAAC,CAAD;IACR,IAAI,CAAC,QAAL,CAAe,IAAC,CAAA,EAAhB,EAAoB,CAApB,EAAuB,IAAC,CAAA,MAAxB,EAAgC,IAAC,CAAA,OAAjC;AACA,WAAO;EAFC;;iBASV,OAAA,GAAS,SAAC,EAAD,EAAK,SAAL;IACP,IAAI,CAAC,OAAL,CAAc,IAAC,CAAA,EAAf,EAAmB,EAAnB,EAAuB,SAAvB,EAAkC,IAAC,CAAA,MAAnC,EAA2C,IAAC,CAAA,OAA5C;AACA,WAAO;EAFA;;iBAST,KAAA,GAAO,SAAC,EAAD;IACL,IAAI,CAAC,KAAL,CAAY,IAAC,CAAA,EAAb,EAAiB,EAAjB;AACA,WAAO;EAFF;;iBAUP,IAAA,GAAM,SAAC,CAAD,EAAI,GAAJ,EAAS,QAAT,EAAwB,IAAxB,EAA8B,IAA9B;AACJ,QAAA;;MADa,WAAS;;IACtB,GAAA,GAAU,IAAA,MAAA,CAAO,CAAP;IACV,IAAG,IAAH;MAAa,GAAG,CAAC,GAAJ,CAAQ,IAAR,EAAc,CAAd,EAAb;;IACA,IAAG,IAAH;MAAa,GAAG,CAAC,GAAJ,CAAQ,CAAR,EAAW,IAAX,EAAb;;IACA,IAAC,CAAA,EAAE,CAAC,QAAJ,CAAa,GAAb,EAAkB,GAAG,CAAC,CAAtB,EAAyB,GAAG,CAAC,CAA7B,EAAgC,QAAhC;AACA,WAAO;EALH;;;;;;AASR,IAAI,CAAC,IAAL,GAAY","file":"Form.js","sourceRoot":"/source/","sourcesContent":["# ### Form makes visible the invisible. It transforms a point into an inkblot, or an arrow, or a musical note. By separating forms from its concepts, we may create a myriad of expressions on a single concept, or apply a unified style to various concepts. The Form class provides basic method to draw points, lines, and other primitives on CanvasSpace. Extend this class to visualize in different ways in different contexts.\r\nclass Form\r\n\r\n  # ## Create a new Form which is based on HTML Canvass\r\n  # @param `space` A space that has a valid context for this form. In this case, the space should represent an html canvas.\r\n  # @return a new Form object\r\n  constructor: ( space ) ->\r\n\r\n    # ## a property to reference the space\r\n    @space = space\r\n\r\n    # ## a property to reference the canvas rendering context\r\n    @cc = space.ctx\r\n\r\n    # default style\r\n    @cc.fillStyle = '#999'\r\n    @cc.strokeStyle = '#666'\r\n    @cc.lineWidth = 1\r\n    @cc.font = \"11px sans-serif\"\r\n\r\n    # ## a boolean property to set if the next drawing should be filled with current fill style\r\n    @filled = true\r\n\r\n    # ## a boolean property to set if the next drawing should be stroked with current stroke style\r\n    @stroked = true\r\n\r\n    # ## a property to specify the current font size\r\n    @fontSize = 11\r\n\r\n    # ## a property to specify the current font face\r\n    @fontFace = \"sans-serif\"\r\n\r\n\r\n  # ## A static function to get 2d context from a canvas element in the DOM\r\n  # @param `canvas_id` the id attribute of the canvas element\r\n  # @eg `Form.context('my_canvas')`\r\n  # @return a canvas rendering context object\r\n  @context : ( canvas_id ) ->\r\n    # get canvas and its 2d context\r\n    elem = document.getElementById( canvas_id )\r\n    cc = if elem and elem.getContext then elem.getContext('2d') else false\r\n    if !cc then throw \"Cannot initiate canvas 2d context\"\r\n    cc\r\n\r\n\r\n  # ## A static function to draw a line\r\n  # @param `ctx` canvas rendering context\r\n  # @param `pair` a Pair object\r\n  @line: (ctx, pair) ->\r\n    if !pair.p1 then throw \"#{pair.toString()} is not a Pair\"\r\n    ctx.beginPath()\r\n    ctx.moveTo( pair.x, pair.y )\r\n    ctx.lineTo( pair.p1.x, pair.p1.y )\r\n    ctx.stroke()\r\n\r\n\r\n\r\n  # ## A static function to draw a line\r\n  # @param `ctx` canvas rendering context\r\n  # @param `pairs` an array of Pair objects\r\n  @lines: (ctx, pairs) ->\r\n    for ln in pairs\r\n      Form.line( ctx, ln )\r\n\r\n\r\n  # ## A static function to draw a rectangle\r\n  # @param `ctx` canvas rendering context\r\n  # @param `pair` a Pair object\r\n  # @param `fill` a boolean value to specify if the points should be filled. Default to true.\r\n  # @param `stroke` a boolean value to specify if the points should be stroked. Default to false.\r\n  @rect: (ctx, pair, fill=true, stroke=false) ->\r\n    if !pair.p1 then throw \"#{pair.toString() is not a Pair}\"\r\n    ctx.beginPath()\r\n    ctx.moveTo( pair.x, pair.y )\r\n    ctx.lineTo( pair.x, pair.p1.y )\r\n    ctx.lineTo( pair.p1.x, pair.p1.y )\r\n    ctx.lineTo( pair.p1.x, pair.y )\r\n    ctx.closePath()\r\n    if stroke then ctx.stroke()\r\n    if fill then ctx.fill()\r\n\r\n\r\n  # ## A static  function to draw a circle\r\n  # @param `ctx` canvas rendering context\r\n  # @param `c` a Circle object\r\n  # @param `fill` a boolean value to specify if the points should be filled. Default to true.\r\n  # @param `stroke` a boolean value to specify if the points should be stroked. Default to false.\r\n  @circle: (ctx, c, fill=true, stroke=false) ->\r\n    ctx.beginPath()\r\n    ctx.arc( c.x, c.y, c.radius, 0, Const.two_pi, false )\r\n    if fill then ctx.fill()\r\n    if stroke then ctx.stroke()\r\n    return\r\n\r\n\r\n  # ## A static function to draw an arc\r\n  # @param `ctx` canvas rendering context\r\n  # @param `pt` a Point\r\n  # @param `radius` radius of the arc's circle\r\n  # @param `start` start angle\r\n  # @param `stroke` end angle\r\n  @arc: (ctx, pt, radius, start, end ) ->\r\n    ctx.beginPath()\r\n    ctx.arc( pt.x, pt.y, radius, start, end)\r\n    ctx.stroke()\r\n\r\n\r\n  # ## A static function to draw a triangle\r\n  # @param `ctx` canvas rendering context\r\n  # @param `tri` a Triangle object\r\n  # @param `fill` a boolean value to specify if the points should be filled. Default to true.\r\n  # @param `stroke` a boolean value to specify if the points should be stroked. Default to false.\r\n  @triangle: ( ctx, tri, fill=true, stroke=false) ->\r\n    ctx.beginPath()\r\n    ctx.moveTo( tri.x, tri.y )\r\n    ctx.lineTo( tri.p1.x, tri.p1.y )\r\n    ctx.lineTo( tri.p2.x, tri.p2.y )\r\n    ctx.closePath()\r\n    if fill then ctx.fill()\r\n    if stroke then ctx.stroke()\r\n    return\r\n\r\n\r\n  # ## A static function to draw a point\r\n  # @param `ctx` canvas rendering context\r\n  # @param `pt` a Point object\r\n  # @param `halfsize` radius or half size of the point. Default is 2.\r\n  # @param `fill` a boolean value to specify if the points should be filled. Default to true.\r\n  # @param `stroke` a boolean value to specify if the points should be stroked. Default to false.\r\n  # @param `circle` a boolean value to specify if the points should be drawn as a circle. Default to false.\r\n  @point: (ctx, pt, halfsize=2, fill=true, stroke=false, circle=false ) ->\r\n\r\n    if circle\r\n      ctx.beginPath()\r\n      ctx.arc( pt.x, pt.y, halfsize, 0, Const.two_pi, false )\r\n\r\n    else\r\n      x1 = pt.x-halfsize\r\n      y1 = pt.y-halfsize\r\n      x2 = pt.x+halfsize\r\n      y2 = pt.y+halfsize\r\n\r\n      ctx.beginPath()\r\n      ctx.moveTo( x1, y1 )\r\n      ctx.lineTo( x1, y2 )\r\n      ctx.lineTo( x2, y2 )\r\n      ctx.lineTo( x2, y1 )\r\n      ctx.closePath()\r\n\r\n    if fill then ctx.fill()\r\n    if stroke then ctx.stroke()\r\n    return pt\r\n\r\n\r\n  # ## A static function similar to `Form.point()` but draw a series of points\r\n  # @param `ctx` canvas rendering context\r\n  # @param `pts` an array of Points\r\n  # @param `halfsize, fill, stroke, circle` same parameters as in `Form.point()`\r\n  @points: (ctx, pts, halfsize=2, fill=true, stroke=false, circle=false ) ->\r\n    for p in pts\r\n      Form.point( ctx, p, halfsize, fill, stroke, circle )\r\n\r\n\r\n  # ## A static function to draw a polygon\r\n  # @param `ctx` canvas rendering context\r\n  # @param `pts` an array of Points\r\n  # @param `closePath` a boolean value to specify if the path should be closed (joining last point with first point)\r\n  # @param `fill` a boolean value to specify if the points should be filled. Default to true.\r\n  # @param `stroke` a boolean value to specify if the points should be stroked. Default to true.\r\n  @polygon: ( ctx, pts, closePath=true, fill=true, stroke=true) ->\r\n    if pts.length <= 1 then return;\r\n    ctx.beginPath()\r\n    ctx.moveTo( pts[0].x, pts[0].y )\r\n    for i in [1...pts.length] by 1\r\n      ctx.lineTo( pts[i].x, pts[i].y )\r\n\r\n    if closePath then ctx.closePath()\r\n    if fill then ctx.fill()\r\n    if stroke then ctx.stroke()\r\n    return\r\n\r\n  # ## A static function to draw a curve\r\n  # @param `ctx` canvas rendering context\r\n  # @param `pts` an array of Points\r\n  @curve: ( ctx, pts ) ->\r\n    Form.polygon( ctx, pts, false, false, true )\r\n\r\n\r\n  # ## A static function to draw text\r\n  # @param `ctx` canvas rendering context\r\n  # @param `pt` a Point object to specify the anchor point\r\n  # @param `txt` a string of text to draw\r\n  # @param `maxWidth` specify a maximum width per line\r\n  @text: ( ctx, pt, txt, maxWidth ) ->\r\n    ctx.fillText( txt, pt.x, pt.y, maxWidth )\r\n\r\n\r\n\r\n  # ## Set current fill style\r\n  # @param `c` fill color which can be as color, gradient, or pattern. (See [canvas documentation](https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/fillStyle)) Default is `false` (transparent)\r\n  # @eg `form.fill(\"#F90\")` `form.fill(\"rgba(0,0,0,.5\")` `form.fill(false)`\r\n  # @demo form.fill\r\n  # @return this Form\r\n  fill: (c) ->\r\n    @cc.fillStyle = if c then c else \"transparent\"\r\n    @filled =  !!c\r\n    return @\r\n\r\n\r\n  # ## Set current stroke style\r\n  # @param `c` stroke color which can be as color, gradient, or pattern. (See [canvas documentation](https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/strokeStyle)) Default is false (transparent)\r\n  # @param `width` Optional value (can be floating point) to set line width\r\n  # @param `joint` Optional string to set line joint style. Can be \"miter\", \"bevel\", or \"round\".\r\n  # @eg `form.stroke(\"#F90\")` `form.stroke(\"rgba(0,0,0,.5\")` `form.stroke(false)` `form.stroke(\"#000\", 0.5, 'round')`\r\n  # @return this Form\r\n  stroke: (c, width, joint) ->\r\n    @cc.strokeStyle = if c then c else \"transparent\"\r\n    @stroked = !!c\r\n    if width then @cc.lineWidth = width\r\n    if joint then @cc.lineJoin = joint\r\n    return @\r\n\r\n\r\n  # ## Set font size and font face\r\n  # @param `size` an integer value to specify font size in pixels\r\n  # @param `face` optional name to change the font face, such as \"sans-serif\" or \"Helvetica\"\r\n  # @eg `form.font(24)` `form.font(12, \"Georgia\")`\r\n  # @demo form.font\r\n  # @return this Form\r\n  font: (size, face=@fontFace) ->\r\n    @fontSize = size\r\n    @cc.font = \"#{size}px #{face}\"\r\n    return @\r\n\r\n\r\n  # ## Draw a shape. Defaults to `sketch()`. Override this function to draw differently.\r\n  # @return this Form\r\n  draw: ( shape ) ->\r\n    @sketch( shape )\r\n\r\n\r\n  # ## Default draw based on the types of shape (Point, Line, Circle, etc)\r\n  # @param `shape` any shape such as `Point` or `Line`, or an array of Points\r\n  # @return this Form\r\n  sketch: ( shape ) ->\r\n    shape.floor()\r\n\r\n    if shape instanceof Circle\r\n      Form.circle(@cc, shape, @filled, @stroked)\r\n\r\n    else if shape instanceof Rectangle\r\n      Form.rect( @cc, shape, @filled, @stroked)\r\n\r\n    else if shape instanceof Triangle\r\n      Form.triangle( @cc, shape, @filled, @stroked)\r\n\r\n    else if shape instanceof Line or shape instanceof Pair\r\n      Form.line(@cc, shape)\r\n\r\n    else if shape instanceof PointSet\r\n      Form.polygon(@cc, shape.points )\r\n\r\n    else if shape instanceof Vector or shape instanceof Point\r\n      Form.point(@cc, shape)\r\n\r\n\r\n    return @\r\n\r\n\r\n  # ## Draw a point\r\n  # @param `p` a Point object\r\n  # @param `halfsize` radius or half size of the point. Default is 2.\r\n  # @param `isCircle` a boolean value to specify if the point should be drawn as a circle. Default is false.\r\n  # @return this Form\r\n  point: (p, halfsize=2, isCircle=false) ->\r\n    Form.point(@cc, p, halfsize, @filled, @stroked, isCircle )\r\n    return @\r\n\r\n  # ## Draw a series of points\r\n  # @param `ps` an array of Points\r\n  # @param `halfsize` radius or half size of the point. Default is 2.\r\n  # @param `isCircle` a boolean value to specify if the point should be drawn as a circle. Default is false.\r\n  # @demo form.points\r\n  # @return this Form\r\n  points: (ps, halfsize=2, isCircle=false) ->\r\n    Form.points(@cc, ps, halfsize, @filled, @stroked, isCircle )\r\n    return @\r\n\r\n\r\n  # ## Draw a line\r\n  # @param `p` a Pair object\r\n  # @return this Form\r\n  line: (p) ->\r\n    Form.line(@cc, p)\r\n    return @\r\n\r\n  # ## Draw a series of lines\r\n  # @param `ps` an array of Lines\r\n  # @return this Form\r\n  lines: (ps) ->\r\n    Form.lines(@cc, ps)\r\n    return @\r\n\r\n\r\n  # ## Draw a rectangle\r\n  # @param `p` a Pair object\r\n  # @return this Form\r\n  rect: (p) ->\r\n    Form.rect( @cc, p, @filled, @stroked )\r\n    return @\r\n\r\n\r\n  # ## Draw a circle\r\n  # @param `p` a Circle object\r\n  # @return this Form\r\n  circle: (p) ->\r\n    Form.circle( @cc, p, @filled, @stroked )\r\n    return @\r\n\r\n  # ## Draw an arc\r\n  # @param `p` a Circle object\r\n  # @param `start` start angle\r\n  # @param `end` end angle\r\n  # @return this Form\r\n  arc: (p, start, end) ->\r\n    Form.arc( @cc, p, p.radius, start, end);\r\n    return @\r\n\r\n  # ## Draw a triangle\r\n  # @param `p` a Triangle object\r\n  # @return this Form\r\n  triangle: (p) ->\r\n    Form.triangle( @cc, p, @filled, @stroked )\r\n    return @\r\n\r\n\r\n  # ## Draw a polygon\r\n  # @param `ps` an array of Points\r\n  # @param `closePath` a boolean value to specify if the path should be closed (joining last point with first point)\r\n  # @return this Form\r\n  polygon: (ps, closePath) ->\r\n    Form.polygon( @cc, ps, closePath, @filled, @stroked)\r\n    return @\r\n\r\n\r\n  # ## Draw a curve\r\n  # @param `ps` an array of Points\r\n  # @demo form.curve\r\n  # @return this Form\r\n  curve: (ps) ->\r\n    Form.curve( @cc, ps )\r\n    return @\r\n\r\n\r\n  # ## Draw text\r\n  # @param `p` a Point to specify anchor position\r\n  # @param `txt` a string of text\r\n  # @param `maxWidth` maximum width per line\r\n  # @param `xoff, yoff` x and y positional offset values\r\n  text: (p, txt, maxWidth=1000, xoff, yoff) ->\r\n    pos = new Vector(p)\r\n    if xoff then pos.add(xoff, 0)\r\n    if yoff then pos.add(0, yoff)\r\n    @cc.fillText(txt, pos.x, pos.y, maxWidth)\r\n    return @\r\n\r\n\r\n# namespace\r\nthis.Form = Form"]}