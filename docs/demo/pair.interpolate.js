!function(){function e(e,a,n){for(var t=[],o=0;o<e.length;o++){var r=o==e.length-1?0:o+1;t.push(new Pair(e[o].interpolate(a)).to(e[r].interpolate(1-n)))}return t}window.demoDescription="Interpolate each side of a rectangle, and use the interpolated point on each side to define an inner rectangle.";var a={a1:"#ff2d5d",a2:"#42dc8e",a3:"#2e43eb",a4:"#ffe359",b1:"#96bfed",b2:"#f5ead6",b3:"#f1f3f7",b4:"#e2e6ef"},n=new CanvasSpace("demo",a.b3).display(),t=new Form(n.ctx),o=.4*Math.min(n.size.x,n.size.y),r=n.size.$divide(2),i=0,f=0,l=0,d=r.$subtract(o,o),s=r.$add(o,o),c=[new Pair(d).to(s.x,d.y),new Pair(s.x,d.y).to(s),new Pair(s).to(d.x,s.y),new Pair(d.x,s.y).to(d)];n.add({animate:function(n,o,r){f=Math.sin(l++%360*Const.deg_to_rad),t.fill("#fff").stroke(!1).polygon(c);var i=[];t.stroke("#abc",.5);for(var d=0;d<c.length;d++)i[d]=new Pair(c[d].interpolate(.1+.1*f)).to(c[d].interpolate(.9+.1*f)),t.line(i[d]);var s=.5+.5*f,g=e(i,.2,.8);t.fill(a.a3).stroke(!1).polygon(g);var p=e(g,1-s,s);t.fill(!1).stroke(a.a4).polygon(p);var b=e(p,1-s,1-s);t.stroke("#fff",1).polygon(b),t.stroke("rgba(255,255,255,.2").lines(b)},onMouseAction:function(e,a,n,t){if("move"==e){var o=r.$subtract(a,n);ang=Util.boundRadian(o.angle(),!0);for(var f=0;f<c.length;f++)c[f].rotate2D(ang-i,r);i=ang}}}),n.bindMouse(),n.play()}();