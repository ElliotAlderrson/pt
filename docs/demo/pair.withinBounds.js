!function(){function e(){Pair.call(this,arguments),this.inner=[],this.color=(new Pair).to(255,255,255)}window.demoDescription="Nested rectangles created by pairs of points. When mouse position is within one of the rectangles, fill it with a color in a color gradient.";var i={a1:"#ff2d5d",a2:"#42dc8e",a3:"#2e43eb",a4:"#ffe359",b1:"#96bfed",b2:"#f5ead6",b3:"#f1f3f7",b4:"#e2e6ef"},t=new CanvasSpace("demo","#c3cbd5").display(),n=new Form(t.ctx);Util.extend(e,Pair),e.prototype.nest=function(e){if(!(this.inner.length>10)){var i=e.size().$divide(5+10*Math.random(),10+15*Math.random()),t=e.size().$divide(5+10*Math.random(),10+15*Math.random()),n=new Pair(e.$add(i)).to(e.p1.$subtract(t));this.inner.push(n),this.nest(n)}},e.prototype.init=function(e){return this.color=new Pair(Color.parseHex(i["a"+e],!0)).to(Color.parseHex(i["a"+(e+1)],!0)),this.nest(this),this},e.prototype.animate=function(e,i,t){for(var a=0;a<this.inner.length;a++){var r=!1;this.inner[a].withinBounds(o)&&(r=new Color(this.color.interpolate(a/this.inner.length)).rgb()),n.fill(r).stroke(r?r:"#fff",.5).rect(this.inner[a])}};var o=new Vector(t.size.$divide(3,2)),a=t.size.y/3;t.add((new e).to(t.size.x,a).init(1)),t.add(new e(0,a).to(t.size.x,2*a).init(2)),t.add(new e(0,2*a).to(t.size.x,3*a).init(3)),t.add({onMouseAction:function(e,i,t,n){"move"==e&&o.set(i,t)},animate:function(){}}),t.bindMouse(),t.play()}();